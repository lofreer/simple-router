!function(t){"function"==typeof window.define?window.define.amd?window.define(t):window.define.cmd?window.define(function(e,o,n){return t}):t():"object"==typeof module&&"object"==typeof module.exports?module.exports=t():window.Router=t()}(function(){var t=Simple.createClass({createElement:Simple.createElement,listen:function(t){this.hasOwnProperty("listener")||this.listener||(this.listener=[]),this.listener.push(t)},updateLocation:function(){var t=this;"history"===this.props.history?(window.addEventListener("popstate",function(){var e=location.pathname;t.listener.forEach(function(t){t(e)})},!1),window.addEventListener("click",function(e){for(var o=e.target;"A"!==o.nodeName&&o.parentNode;)o=o.parentNode;o.href&&t.routes.some(function(n){if(o.host===location.host&&n.reg.test(o.pathname))return e.preventDefault(),t.go(o.pathname),!0})},!1)):window.addEventListener("hashchange",function(){var e=location.hash.replace(/^#/,"");t.listener.forEach(function(t){t(e)})},!1)},go:function(t){"history"===this.history?(window.history.pushState({path:t},"",t),this.listener.forEach(function(e){e(t)})):window.location.hash=t},getComponent:function(t,e){t=t.slice();var o,n;return o=this.createElement((n=t.shift()).component),o.props=Object.assign({},e,{router:this}),t.length?o.props.children=this.getComponent(t,e):n.indexRoute&&(o.props.children=this.createElement(n.indexRoute.component),e.routes.push(n.indexRoute),o.props.children.props=Object.assign({},e,{router:this})),o},matchRoutes:function(t){var e=this,o={};return this.routes.some(function(n){if(n.reg.test(t)){var i=t.match(n.reg),s={};return i&&n.params&&(n.params.forEach(function(t,e){s[t]=i[e+1]}),o.params=s),o.routes=n.routes,o.components=e.getComponent(n.routes,o),!0}}),o},parseRoutes:function(t,e,o){var n=this,i=/:(\w+)/g;path=e||"",o=o||[];var s=o.slice();t.forEach(function(t,r){var a={};/^\//.test(t.path)&&(path=""),a.path=path+=t.path,a.component=t.component,t.indexRoute&&(a.indexRoute=t.indexRoute),o.push(t),a.routes=s.slice().concat(t),a.reg=new RegExp("^"+path.replace(i,"(\\w+)")+"$");var h=path.match(i);h&&(a.params=h.map(function(t){return t.replace(":","")})),n.routes.push(a),t.childRoutes&&(/\/$/.test(path)||(path+="/"),n.parseRoutes(t.childRoutes,path,o)),o=s.slice(),path=e||""})},isActive:function(){var t;t="history"===this.props.history?location.pathname:location.hash.replace(/^#/,""),""===t&&(t="/"),this.state=this.matchRoutes(t)},componentWillMount:function(){var t=this;this.history=this.props.history,this.routes=[],this.parseRoutes(Simple.utils.isArray(this.props.routes)?this.props.routes:[this.props.routes]),this.listen(function(e){t.setState(t.matchRoutes(e))}),this.updateLocation(),this.isActive()},render:function(){return console.log(this),this.state.components}});return t});